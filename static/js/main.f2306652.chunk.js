(this.webpackJsonpwhocallingme=this.webpackJsonpwhocallingme||[]).push([[0],{33:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),i=c(25),s=c.n(i),r=(c(33),c(27)),o=c(4),l=c(14),d=c(8),u=c(17),j=(c(46),u.a.initializeApp({apiKey:"AIzaSyAH5WCrotOHR3tmQ6CVmMWNGtb_dSiRrxc",authDomain:"whocallingme-b3996.firebaseapp.com",projectId:"whocallingme-b3996",storageBucket:"whocallingme-b3996.appspot.com",messagingSenderId:"325525269763",appId:"1:325525269763:web:62e0c2089d0f3c7d6acd36"}),u.a.firestore()),b=u.a.firestore.Timestamp.now,h=u.a.firestore.FieldValue.increment(1),p=u.a.firestore.FieldValue.increment(-1),m=c(26),O=c.n(m),f=c(1),x=function(e){var t=e.phoneNumber,c=e.onAdd,a=e.prompt,i=Object(n.useState)("scam"),s=Object(d.a)(i,2),r=s[0],o=s[1],l=Object(n.useState)(""),u=Object(d.a)(l,2),h=u[0],p=u[1],m=Object(n.useState)(""),x=Object(d.a)(m,2),g=x[0],v=x[1],k=Object(n.useRef)();Object(n.useEffect)((function(){var e={defaultDate:new Date,setDefaultDate:!0},t=document.querySelector(".datepicker");O.a.Datepicker.init(t,e)}),[]);var w=function(e){var t=e.target.dataset.value;o(t)};return Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)("div",{className:"card-content",children:[Object(f.jsx)("p",{className:"card-title",children:a||"No results found, help the community by adding a description of this number."}),Object(f.jsx)("blockquote",{children:t}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("label",{htmlFor:"desc",children:"Description"}),Object(f.jsx)("input",{type:"text",id:"description",value:h,onChange:function(e){return p(e.target.value)}})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("label",{htmlFor:"",children:"Called on"}),Object(f.jsx)("input",{type:"text",className:"datepicker",ref:k})]}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("h5",{children:"Category"}),Object(f.jsx)("p",{children:Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"category","data-value":"scam",className:"with-gap",type:"radio",defaultChecked:"scam"===r,onClick:w}),Object(f.jsx)("span",{children:"Impersonation Scam"})]})}),Object(f.jsx)("p",{children:Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"category","data-value":"spam",className:"with-gap",type:"radio",defaultChecked:"spam"===r,onClick:w}),Object(f.jsx)("span",{children:"Spam/Harassment"})]})}),Object(f.jsx)("p",{children:Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{name:"category","data-value":"others",className:"with-gap",type:"radio",defaultChecked:"others"===r,onClick:w}),Object(f.jsx)("span",{children:"Others"})]})}),"others"===r&&Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("label",{htmlFor:"",children:"Custom category"}),Object(f.jsx)("input",{type:"text",name:"",id:"",value:g,onChange:function(e){v(e.target.value)}})]})]}),Object(f.jsx)("button",{onClick:function(){j.collection("phoneNumbers").add({category:r,customCategory:g,number:t,calledOn:k.current.value,description:h,createdAt:b(),likes:0,dislikes:0}).then(c).catch((function(e){return console.log("error --\x3e",e)}))},className:"btn waves-effect waves-light pink",children:"Add"})]})})},g=c(20),v="likes",k=function(e){var t,c=Object(n.useState)((t=e,JSON.parse(localStorage.getItem(v))||t)),a=Object(d.a)(c,2),i=a[0],s=a[1];return Object(n.useEffect)((function(){localStorage.setItem(v,JSON.stringify(i))}),[i]),[i,s]},w=function(e){var t=e.results,c=e.inaccurateCallback,n={scam:"pink",spam:"yellow",others:"orange"},a={scam:"white-text",spam:"black-text",others:"white-text"};t=t.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{isLiked:!1})})).sort((function(e,t){return t.likes-e.likes}));var i=k({}),s=Object(d.a)(i,2),r=s[0],o=s[1],u=function(e){o((function(t){return t[e]?j.collection("phoneNumbers").doc(e).update({likes:p}):j.collection("phoneNumbers").doc(e).update({likes:h}),Object(l.a)(Object(l.a)({},t),{},Object(g.a)({},e,!t[e]))}))};return Object(f.jsx)("section",{children:t.map((function(e){return Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)("div",{className:"card-content",children:[Object(f.jsxs)("div",{className:"edit-card",children:[Object(f.jsxs)("div",{className:"right",onClick:u.bind(undefined,e.id),children:[Object(f.jsx)("span",{style:{marginRight:"3px",fontSize:"20px",verticalAlign:"top"},children:e.likes>=0?e.likes:0}),Object(f.jsx)("i",{className:"material-icons-outlined ".concat(r[e.id]&&"pink-text"),style:{cursor:"pointer"},children:"thumb_up"})]}),Object(f.jsx)("p",{onClick:c,className:"edit-card__inaccurate",children:"Inaccurate?"})]}),Object(f.jsx)("p",{className:"card-title",children:e.number}),Object(f.jsx)("div",{children:"Description"}),Object(f.jsx)("blockquote",{children:""===e.description?"Not given.":e.description}),Object(f.jsxs)("div",{children:["Called on ",e.calledOn]}),Object(f.jsxs)("div",{className:"mt-1",children:["Categorised as"," ",Object(f.jsx)("span",{className:"".concat(a[e.category]," ").concat(n[e.category]),style:{padding:"2px 5px",borderRadius:"100px"},children:e.category})]})]})},e.id)}))})},N=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],i=Object(n.useState)(),s=Object(d.a)(i,2),r=s[0],o=s[1],u=Object(n.useState)(!1),b=Object(d.a)(u,2),h=b[0],p=b[1],m=Object(n.useState)(!1),O=Object(d.a)(m,2),g=O[0],v=O[1],k=function(){j.collection("phoneNumbers").where("number","==",c).onSnapshot((function(e){if(e.empty)return p(!0),o(null),void v(!1);p(!1),o(e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})))}))},N=function(){p(!1),v(!1),k()};return Object(f.jsxs)("div",{className:"container",style:{marginTop:"5%"},children:[Object(f.jsx)("div",{className:"card",children:Object(f.jsxs)("div",{className:"card-content",children:[Object(f.jsx)("p",{className:"card-title",children:"Who is calling me?"}),Object(f.jsxs)("div",{className:"input-field",children:[Object(f.jsx)("label",{htmlFor:"a",children:"Phone number (include the + if there was a +)"}),Object(f.jsx)("input",{type:"text",id:"a",value:c,onChange:function(e){var t=e.target.value;/^[0-9+]+$/.test(t)&&a(t)}})]}),Object(f.jsx)("button",{onClick:k,className:"btn waves-effect waves-light pink",children:"Lookup"})]})}),r&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"Results"}),Object(f.jsx)(w,{results:r,inaccurateCallback:function(){g?v((function(e){return!e})):(v((function(e){return!e})),setTimeout((function(){window.scrollTo(0,document.body.scrollHeight)}),100))}})]}),h&&Object(f.jsx)(x,{phoneNumber:c,onAdd:N}),g&&Object(f.jsx)(x,{phoneNumber:c,onAdd:N,prompt:"Add a new report for this number."})]})},y=function(){return Object(f.jsx)(r.a,{children:Object(f.jsx)(o.c,{children:Object(f.jsx)(o.a,{path:"/",component:N})})})},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var c=e.installing;null!=c&&(c.onstatechange=function(){"installed"===c.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c(43),c(44);s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");S?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(c){var n=c.headers.get("content-type");404===c.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):C(t,e)}))}}()}},[[45,1,2]]]);